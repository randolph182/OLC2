// jar en la pagina -> http://www2.cs.tum.edu/projects/cup/
package analizadores.FS;
import java_cup.runtime.*;
import java.util.LinkedList;

// ************** importaciones de las clases que se utilizaran en el analisis *********
import FuncionScript.AST.Expresiones.*;
import FuncionScript.AST.Expresiones.Operacion.*;
import FuncionScript.Entorno.*;
//acciones que se programan en el parser
parser code
{:
    /**Metodo al que se llama automáticamente ante algún error sintactico.*/
    public void syntax_error(Symbol s){
        System.out.println("Error sintactico en la Línea " + (s.right+1) +" Columna "+s.left+ ". Identificador "
        +s.value + " no reconocido." );
    }
         /**Metodo al que se llama en el momento en que ya no es posible una recuperación de
    errores.*/
    public void unrecovered_syntax_error(Symbol s) throws java.lang.Exception{
        System.out.println("Error sintactico en la Línea " + (s.right+1)+ " Columna "+s.left+". Identificador " +
        s.value + " no reconocido.");   
	}
    

:}

terminal String tImprimir;
terminal String tTrue;
terminal String tFalse;
terminal String tPtoComa;
terminal String tMas;
terminal String tMenos;
terminal String tDiv;
terminal String tPor;
terminal String tElev;
terminal String tIgual;
terminal String tParOpen;
terminal String tParClose;
terminal String tEntero;
terminal String tCad;
terminal String tDec;
terminal String tId;
terminal String tAumen;
terminal String tDecremen;
terminal String unarioNeg;
terminal String tVar;
terminal String tComa;
terminal String umenos;

non terminal S;
non terminal DECLARACION;
non terminal LST_ID;
non terminal Expresion EXPRESION;
non terminal INSTRUCCION;
non terminal INSTRUCCIONES;
non terminal ASIG_VAL;

precedence left  tMas,tMenos;
precedence left  tPor,tDiv;
precedence right  tElev;
precedence left  tAumen,tDecremen;
precedence right  umenos;

/* ******************************************* GRAMATICA **************************************** */
start with S;

S::=	INSTRUCCIONES;

INSTRUCCIONES::= INSTRUCCIONES INSTRUCCION
                |INSTRUCCION
                ;

INSTRUCCION::=   DECLARACION
                ;

DECLARACION::=   tVar LST_ID ASIG_VAL tPtoComa
                ;
ASIG_VAL::=     
                | tIgual EXPRESION
                ;

LST_ID::=       LST_ID tComa tId
                |tId
                ;

EXPRESION::=     tMenos EXPRESION:a                 {:RESULT = new Aritmetica(a,new Tipo(Tipo.TipoFS.NEGATIVO),aleft);:} %prec umenos
                |EXPRESION:a tMas EXPRESION:b       {:RESULT = new Aritmetica(a,b,new Tipo(Tipo.TipoFS.SUMA),aleft);:}
                |EXPRESION:a tMenos EXPRESION:b     {:RESULT = new Aritmetica(a,b,new Tipo(Tipo.TipoFS.RESTA),aleft);:}
                |EXPRESION:a tPor EXPRESION:b       {:RESULT = new Aritmetica(a,b,new Tipo(Tipo.TipoFS.MULTIPLICACION),aleft);:}
                |EXPRESION:a tDiv EXPRESION:b       {:RESULT = new Aritmetica(a,b,new Tipo(Tipo.TipoFS.DIVISION),aleft);:}
                |EXPRESION:a tElev EXPRESION:b      {:RESULT = new Aritmetica(a,b,new Tipo(Tipo.TipoFS.ELEVACION),aleft);:}
                |EXPRESION:a tAumen                   {:RESULT = new Aritmetica(a,new Tipo(Tipo.TipoFS.AUMENTO),aleft);:}
                |EXPRESION:a tDecremen                {:RESULT = new Aritmetica(a,new Tipo(Tipo.TipoFS.DECREMENTO),aleft);:}
                |tParOpen EXPRESION:a tParClose     {:RESULT = a;:}
                |tEntero:a                          {:RESULT = new Unario(a,new Tipo(Tipo.TipoFS.INT),aleft);:}
                |tDec:a                             {:RESULT = new Unario(a,new Tipo(Tipo.TipoFS.DOUBLE),aleft);:}
                |tCad:a                             {:RESULT = new Unario(a,new Tipo(Tipo.TipoFS.STRING),aleft);:}
                ;